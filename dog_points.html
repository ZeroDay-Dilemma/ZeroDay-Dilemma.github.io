<!DOCTYPE html>
<!-- DONE TODO add clear button -->
<!-- DONE TODO color majors distinctly -->
<!-- TODO explanation for how the calcuation is done-->
<!-- DONE TODO display the input in 1 line above the results (for screenshots)-->
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <script>
      //TODO Make only text color, it currently affects borders
      //TODO Make only text color, it currently affects borders
      //TODO Make only text color, it currently affects borders

      const points = [0, 1, 2, 3, 4, 5]; // Categories for sex = 1
        
      const samoyed_schedule = [
        //male
        [
          [0, 0, 0, 0, 0, 0],  // division 1 N/A
          [0, 0, 0, 0, 0, 0],  // division 2 N/A
          [0, 2, 3, 4, 5, 7],  // division 3 male
          [0, 2, 4, 5, 7, 10], // division 4 male
          [0, 2, 4, 5, 6, 8]   // division 5 male
        ],
        // const samoyed_schedule_female=
        // female
        [
          [0, 0, 0, 0, 0, 0],    // division 1 N/A
          [0, 0, 0, 0, 0, 0],    // division 2 N/A
          [0, 2, 6, 10, 12, 15], //divison 3 female
          [0, 2, 4, 6, 7, 9],    //division 4 female
          [0, 2, 5, 8, 10, 13]   //division 5 female
        ]
      ];
      let division;
      let classDogs;
      let classBitches;
      let championDogs;
      let championBitches;

      let WD;
      let WB;
      let WD_BoW;
      let WB_BoW;
      let WD_BoW_WB_BoS;
      let WB_BoW_WD_BoS;
      let WD_BoS;
      let WB_BoS;
      let WD_BoS_BoW;
      let WB_BoS_BoW;
      let WD_BoB;
      let WB_BoB;
      let WD_BoB_WB_BoS;
      let WB_BoB_WD_BoS;
      let SD;
      let SB;


      const MALE_DOGS = 1;
      const FEMALE_DOGS = 2;
      // Calculate Winners Dog, Winners Bitch, WD is BoW, WB is BoW, BOS = Winners is BOS = Winners is BOS & BoW
      function calculateStart(){
          division = document.getElementById('divisionInput').value.split(" ")[1];
          classDogs = document.getElementById('classDogsInput').value || 0;
          classBitches = document.getElementById('classBitchesInput').value || 0;
          championDogs = document.getElementById('championDogsInput').value || 0;
          championBitches = document.getElementById('championBitchesInput').value || 0;
      }


      

      function clearEnteredNumbers(){
        document.getElementById('classDogsInput').value = '';
        document.getElementById('classBitchesInput').value = '';
        document.getElementById('championDogsInput').value = '';
        document.getElementById('championBitchesInput').value = '';
      }


      function randomIntFromInterval(min, max) { // min and max included 
        return Math.floor(Math.random() * (max - min + 1) + min)
      }


      function debug_InsertRandomNumbers(){
          document.getElementById('classDogsInput').value = randomIntFromInterval(0, 20);
          document.getElementById('classBitchesInput').value = randomIntFromInterval(0, 20);
          document.getElementById('championDogsInput').value = randomIntFromInterval(0, 20);
          document.getElementById('championBitchesInput').value = randomIntFromInterval(0, 20);
      }



      function generate(){


        calculateStart();

        document.getElementById('points-table').hidden=false;
        document.getElementById('small-input-display-div').hidden=false;
        document.getElementById('small-input-display-p').innerText="["+classDogs+", " + classBitches + ", " + championDogs + ", " + championBitches+"]";
        
        //document.getElementById('inputtedNumbersResult').textContent= "("+classDogs+", " + classBitches + ", " + championDogs + ", " + championBitches+")";
        //document.getElementById('input-nums').hidden=false;

        //calculate Winners Dog and Winners Bitch, Simple Math
        winnersDogAndBitch();

        //calculate Best of Winners
        bestOfWinners();

        

        //calculate best of Opposite Sex
        bestOfOpposite();

        //calculate best of winners when other winners is BoS
        winnersAndOtherIsBoS();

        //calculate best of winners and best of opposite sex
        winnersAndBoS();


        //calculate best of breed main
        bestOfBreed();

        //calculate winners BoB if opposite sex winners is BoS
        bestOfBreedIfOtherIsBoS(); 

        //calculate select 
        selectPoints();

        //colorMajors
        //colorMajorRed();

        
        
      }

      function colorMajorsRed(el, points){
        el.textContent = points;
        if(points>=3){

          //TODO Make only text color, it currently affects borders
          el.style.color='red';
        }
        else{
          el.style.color="#000";
        }
        
      }

      function winnersDogAndBitch(){
        WD = runAgainstSchedule(division,classDogs,MALE_DOGS);
        
        WB = runAgainstSchedule(division,classBitches,FEMALE_DOGS);

        colorMajorsRed(document.getElementById('WD_TD'),WD);
        colorMajorsRed(document.getElementById('WB_TD'),WB);

        //document.getElementById('WD_TD').textContent = WD;
        //document.getElementById('WB_TD').textContent = WB;
        // console.log(runAgainstSchedule(division,classDogs,1))
        // console.log(runAgainstSchedule(division,classBitches,2));
      }

      function selectPoints(){
          //SD
          //SB
          //sum of sex - 1 against schedule
          console.log("select: sum of sex -1: total dogs = " + (parseInt(classDogs)+parseInt(championDogs)) + "  is " + (parseInt(classDogs)+parseInt(championDogs)-1));

          let selectSumDogs = ((parseInt(classDogs)+parseInt(championDogs))-1);
          let selectSumBitches = ((parseInt(classBitches)+parseInt(championBitches))-1);
          //must be zero or above, so if negative, set to zero
          console.log("using ternary, might not be right?? but it looks cool so heres the debug: ")
          console.log("selectSumDogs before: " + selectSumDogs);
          console.log("selectSumBitches before: " + selectSumBitches);

          selectSumDogs = (selectSumDogs>0 ? selectSumDogs : 0);
          selectSumBitches = (selectSumBitches>0 ? selectSumBitches : 0);

          console.log("selectSumDogs after: " + selectSumDogs);
          console.log("selectSumBitches after: " + selectSumBitches);
          

          SD = runAgainstSchedule(division,selectSumDogs,MALE_DOGS);
          SB = runAgainstSchedule(division,selectSumBitches,FEMALE_DOGS);
          // document.getElementById('SD_TD').textContent = SD;
          // document.getElementById('SB_TD').textContent = SB;
          colorMajorsRed(document.getElementById('SD_TD'),SD);
          colorMajorsRed(document.getElementById('SB_TD'),SB);

      }


      function bestOfBreedIfOtherIsBoS(){
        //this only exists because when a winners dog wins best of breed, it is also best of winners, so there is a possibility of crossover occuring if BoS points are more??
        //WD_BoB_WB_BoS
        //WB_BoB_WD_BoS

        WD_BoB_WB_BoS = (Math.max(WD_BoB,WB_BoS)); //compare between dog BoB and bitch BoS
        WB_BoB_WD_BoS = (Math.max(WB_BoB,WD_BoS)); //compare between bitch BoB and dog BoS
        
        // document.getElementById('WD_BoB_WB_BoS_TD').textContent = WD_BoB_WB_BoS;
        // document.getElementById('WB_BoB_WD_BoS_TD').textContent = WB_BoB_WD_BoS;
        colorMajorsRed(document.getElementById('WD_BoB_WB_BoS_TD'), WD_BoB_WB_BoS);
        colorMajorsRed(document.getElementById('WB_BoB_WD_BoS_TD'), WB_BoB_WD_BoS);
        

      }

      function bestOfBreed(){
        let totalDogs = (parseInt(classDogs)+parseInt(championDogs)+parseInt(classBitches)+parseInt(championBitches));
        WD_BoB = runAgainstSchedule(division,totalDogs,MALE_DOGS);
        WB_BoB = runAgainstSchedule(division,totalDogs,FEMALE_DOGS);

        // document.getElementById('WD_BoB_TD').textContent = WD_BoB;
        // document.getElementById('WB_BoB_TD').textContent = WB_BoB;
        colorMajorsRed(document.getElementById('WD_BoB_TD'), WD_BoB);
        colorMajorsRed(document.getElementById('WB_BoB_TD'), WB_BoB);
        
      }


      function winnersAndOtherIsBoS(){
        //WD_BoW_WB_BoS
        //WB_BoW_WD_BoS

        //just max I think??
        
        WD_BoW_WB_BoS = (Math.max(WB_BoS,WD_BoW)); //compare between BoW dog and Bitch BoS
        WB_BoW_WD_BoS = (Math.max(WD_BoS,WB_BoW)); //compare between BoW bitch and dog BoS


        // document.getElementById('WD_BoW_WB_BoS_TD').textContent = WD_BoW_WB_BoS;
        // document.getElementById('WB_BoW_WD_BoS_TD').textContent = WB_BoW_WD_BoS;
        colorMajorsRed(document.getElementById('WD_BoW_WB_BoS_TD'), WD_BoW_WB_BoS);
        colorMajorsRed(document.getElementById('WB_BoW_WD_BoS_TD'), WB_BoW_WD_BoS)


        if(WD_BoS != WD_BoW){
          console.log("possible crossover in WD_BoW_WB_BoS");
        }
        if(WB_BoS != WB_BoW){
          console.log("possible crossover in WB_BoW_WD_BoS");
        }

        // if(WD_BoS > WD_BoW){
        //   console.log("wd_bow_wb_bos crossover");
        //   WD_BoW_WB_BoS=W
        // }

      }

      function winnersAndBoS(){
        //WD_BoS_BoW
        //WB_BoS_BoW

        WD_BoS_BoW = (Math.max(WD_BoS,WB)); //compare between dog BoS and winners bitch points
        WB_BoS_BoW = (Math.max(WB_BoS,WD)); //compare between bitch BoS and winners dog points
        
        // document.getElementById('WD_BoS_BoW_TD').textContent = WD_BoS_BoW;
        // document.getElementById('WB_BoS_BoW_TD').textContent = WB_BoS_BoW;
        colorMajorsRed(document.getElementById('WD_BoS_BoW_TD'), WD_BoS_BoW);
        colorMajorsRed(document.getElementById('WB_BoS_BoW_TD'), WB_BoS_BoW);
        
      }


      function bestOfWinners(){
        

        if( WD != WB ){ //crossover
          console.log("crossover with " + WD + " and " + WB)
          WD_BoW=(Math.max(WD,WB));
          WB_BoW=(Math.max(WD,WB));
        }
        else{ 
          if((WD == WB) && WD == 0){ //possible 1 point
            //for males
            console.log("sum dogs = " + (classBitches+classDogs) + ", " + samoyed_schedule[MALE_DOGS-1][division-1][1] + ", " + samoyed_schedule[FEMALE_DOGS-1][division-1][1]); 
            if((classBitches+classDogs) >= samoyed_schedule[MALE_DOGS-1][division-1][1] ){ //division-1, males-1, and then the requirement for 1 point 
              console.log("males get 1 point")
              WD_BoW=1;
            }
            if((classBitches+classDogs) >= samoyed_schedule[FEMALE_DOGS-1][division-1][1] ){ //division-1, males-1, and then the requirement for 1 point 
              console.log("females get 1 point")
              WB_BoW=1;
            }
            if (WB_BoW!=1){
              WB_BoW=0;
            }
            if (WD_BoW!=1){
              WD_BoW=0;
            }

          }
          else{ //no crossover, no 1 point, so no points change vs WD and WB
            WD_BoW=WD;
            WB_BoW=WB;
            
          }
        }

        // document.getElementById('WD_BoW_TD').textContent = WD_BoW;
        // document.getElementById('WB_BoW_TD').textContent = WB_BoW;
        colorMajorsRed(document.getElementById('WD_BoW_TD'), WD_BoW);
        colorMajorsRed(document.getElementById('WB_BoW_TD'), WB_BoW);
      }

      function bestOfOpposite(){

        WD_BoS = runAgainstSchedule(division,(parseInt(classDogs)+parseInt(championDogs)),MALE_DOGS);
        WB_BoS = runAgainstSchedule(division,(parseInt(classBitches)+parseInt(championBitches)),FEMALE_DOGS);

        // document.getElementById('WD_BoS_TD').textContent = WD_BoS;
        // document.getElementById('WB_BoS_TD').textContent = WB_BoS;
        colorMajorsRed(document.getElementById('WD_BoS_TD'), WD_BoS);
        colorMajorsRed(document.getElementById('WB_BoS_TD'), WB_BoS);

      }




      function runAgainstSchedule(division, numberOfDogs, sex) {
        
        const divisionIndex = division - 1; //arrays start at 0, divisons start at 1. syncing 
        const sexIndex = sex - 1; // array is 0 for male, 1 for female. could chance sent numbers but this is more fun
        

        // if (division > 0 && sex >0) { //validate input
        //   console.log("valid sex and division: "+  sex +  ", "+division);
        // }
        console.log(divisionIndex + " " + sexIndex + " " + numberOfDogs);
        for (let i = 0; i < samoyed_schedule[sexIndex][divisionIndex].length; i++) {
          if (numberOfDogs < samoyed_schedule[sexIndex][divisionIndex][i]) {
            console.log(points[i-1] + " " + i)
            return points[i-1];

          }
        }
        if(numberOfDogs >=  samoyed_schedule[sexIndex][divisionIndex][samoyed_schedule[sexIndex][divisionIndex].length-1]){
          return points[points.length-1];
        }



        return "-1";
      }

      // oly moly this sucks what was i thinking
      function runAgainstScheduleBAD(division, numberOfDogs, sex){
        //region, number, 1=boys/2=girls
        //2, 3, 4, 5, 7
        //2, 6, 10, 12, 15
        if(division == 3){
          if(sex == 1){
            if(numberOfDogs<2){
              return 0;
            }
            else if (numberOfDogs<3){
              return 1;
            }
            else if (numberOfDogs<4){
              return 2;
            }
            else if (numberOfDogs<5){
              return 3;
            }
            else if (numberOfDogs<7){
              return 4;
            }
            else{
              return 5;
            }
          }
          else if(sex == 2){
            if(numberOfDogs<2){
              return 0;
            }
            else if (numberOfDogs<6){
              return 1;
            }
            else if (numberOfDogs<10){
              return 2;
            }
            else if (numberOfDogs<12){
              return 3;
            }
            else if (numberOfDogs<15){
              return 4;
            }
            else{
              return 5;
            }
          }
          else{
            return "-1";
          }

        }
        
      }

      document.addEventListener('DOMContentLoaded', function() {
        const divisionInput = document.getElementById('divisionInput');
        const divisionDetailsTD = document.getElementById('divisionDetailsTD');
        // Get the input elements
        var classDogsInput = document.getElementById('classDogsInput');
        var classBitchesInput = document.getElementById('classBitchesInput');
        var championDogsInput = document.getElementById('championDogsInput');
        var championBitchesInput = document.getElementById('championBitchesInput');

        // Add event listeners to the input elements
        classDogsInput.addEventListener('input', validatePositiveNumber);
        classBitchesInput.addEventListener('input', validatePositiveNumber);
        championDogsInput.addEventListener('input', validatePositiveNumber);
        championBitchesInput.addEventListener('input', validatePositiveNumber);

        // Validation function to allow only positive numbers
        function validatePositiveNumber(event) {
          var input = event.target;
          var value = input.value;

          if (value < 0) {
            input.value = ''; // Clear the input value
          }
        }
        updateDivisionDetails(getDivisionDetails(divisionInput.value));
        divisionInput.addEventListener('change', function() {
          const selectedDivision = divisionInput.value;
          const divisionDetails = getDivisionDetails(selectedDivision);
          updateDivisionDetails(divisionDetails);
        });

        function getDivisionDetails(division) {
          if (division === 'Division 3') {
            return 'Division 3: District of Columbia, Maryland, North Carolina, Virginia, West Virginia';
          } else if (division === 'Division 4') {
            return 'Division 4: Florida, Georgia, South Carolina';
          } else if (division === 'Division 5') {
            return 'Division 5: Indiana, Kentucky, Michigan, Ohio';
          }
        }
        function updateDivisionDetails(divisionDetails) {
          divisionDetailsTD.textContent = divisionDetails;
        }
      });

    </script>
    <!--  <link rel="stylesheet" type="text/css" href="style.css"> -->
    <style>
      body {
      font-family: Arial, sans-serif;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    
    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
      
    }
    
    th {
      font-weight: bold;
    }
    
    input[type="number"], select {
      width: 100%;
      padding: 6px 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
    }
    
    button {
      display: block;
      margin: 0 auto;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    .table-cell {
      border: 1px solid;
      
      width: 100%;
      
    }
    .table-cell tr td ~ td{
      /*make text bold and slighly larger*/
      font-weight: bold;
      font-size: 16 px;
      padding-left:10px;
      text-align:center;

    }

    .table-cell tr:last-child td {
      border-bottom: 1px solid #000;
    }

    .table-cell tr:nth-of-type(2n):not(:last-child) td {
      border-bottom: 2px solid #000;
    }

    .result-container {
      margin-top: 20px;
      text-align: center;
    }
    
    .result-container h3 {
      margin: 0;
      font-size: 18px;
      font-weight: bold;
    }
    
    .result {
      margin-top: 10px;
      font-size: 16px;
    }

    .division-table {
      margin-top: 20px;
      width: 100%;
      border-collapse: collapse;
    }
    
    .division-table th, .division-table td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    
    .division-table th {
      font-weight: bold;
    }
    .header {
      background-color: #333;
      color: #fff;
      padding: 10px;
      text-align: center;
      font-size: 24px;
    }

    /* Subheader */
    .subheader {
      background-color: #777;
      color: #fff;
      padding: 8px;
      text-align: center;
      font-size: 18px;
    }

    .button-container {
      text-align: center;
    }
    .button-container button {
      display: inline-block;
      margin: 0 5px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    #small-input-display-div{
      display: block;

      text-align: center;
      margin: 5px 5px;
    }
    #small-input-display-p{
      display:inline-block;
      font-size: 16px;
      font-weight: bold;
      margin: 0;
    }
    #clear-button{
      background-color: #f44336;
    }
    /* .dogNumberInput{

    } */



    /*        table {
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f2f2f2;
        }

        input[type="number"],
        select {
            width: 100%;
            box-sizing: border-box;
        }

        .table-cell {
          padding: 8px;
          width:25%;
          background-color: #f2f2f2;
          border: 1px solid;
          text-align: left;
          border-bottom: 1px solid #ddd;
        }
        .table-cell td {
          border: 1px solid;

        }
        .table-cell tr td ~ td{
          width: 10%;
          padding: 8px;
          background-color:red;
        }
        */
    </style>
</head>
<body>
<!-- <body onload="debug_InsertRandomNumbers()"> --> <!-- for debug -->
  <div class="header">AKC Point Schedule Calculator</div>
  <div class="subheader">Only $5 to add your breed!</div>
  <table>
    <tr>
      <th>Division</th>
      <td>
        <select id="divisionInput" style="text-align: left;">
            <option value="Division 3" selected>Division 3</option>
            <option value="Division 4">Division 4</option>
            <option value="Division 5">Division 5</option>
        </select>
      </td>
    </tr>
    <tr>
      <td colspan="2" id="divisionDetailsTD" style="text-align:center"> </td>
    </tr>
    <tr>
      <th>Class Dogs</th>
      <td><input class="dogNumberInput" type="number" placeholder=0 id="classDogsInput"></td>
    </tr>
    <tr>
      <th>Class Bitches</th>
      <td><input class="dogNumberInput" type="number" placeholder=0 id="classBitchesInput"></td>
    </tr>
    <tr>
      <th>Champion Dogs</th>
      <td><input class="dogNumberInput" type="number" placeholder=0 id="championDogsInput"></td>
    </tr>
    <tr>
      <th>Champion Bitches</th>
      <td><input class="dogNumberInput" type="number" placeholder=0 id="championBitchesInput"></td>
    </tr>
  </table>
  <div class="button-container">
    <!--  <button onclick="generate()">Calculate</button>  -->
    <button id="clear-button" onclick="clearEnteredNumbers()">Clear</button>
    <button id="generate-button" onclick="generate()">Calculate</button>
  </div>
  
  <br>
  <div id="small-input-display-div" hidden="true">
    <p id="small-input-display-p"></p>
  </div>
  
  <!--
  <div class="result-container" id="input-nums" hidden="true">
    <h3>Input:</h3>
    <div class="result" id="inputtedNumbersResult"></div>
  </div>
  -->


  <table class="table-cell" id="points-table" hidden="true">
    <tbody>
      <tr>
        <td>Winners Dog</td>
        <td id="WD_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>Winners Bitch</td>
        <td id="WB_TD"></td>
      </tr>
      <tr>
        <td>WD is Best of Winners</td>
        <td id="WD_BoW_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>WB is Best of Winners</td>
        <td id="WB_BoW_TD"></td>
      </tr>
      <tr>
        <td>WD is Best of Winners (WB is BoS)</td>
        <td id="WD_BoW_WB_BoS_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>WB is Best of Winners (WD is BoS)</td>
        <td id="WB_BoW_WD_BoS_TD"></td>
      </tr>
      <tr>
        <td>WD is Best of Opposite</td>
        <td id="WD_BoS_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>WB is Best of Opposite</td>
        <td id="WB_BoS_TD"></td>
      </tr>
      <tr>
        <td>WD is Best of Opposite and BoW</td>
        <td id="WD_BoS_BoW_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>WB is Best of Opposite  and BoW</td>
        <td id="WB_BoS_BoW_TD"></td>
      </tr>
      <tr>
        <td>WD is Best of Breed</td>
        <td id="WD_BoB_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>WB is Best of Breed</td>
        <td id="WB_BoB_TD"></td>
      </tr>
      <tr>
        <td>WD is BoB and WB is BoS</td>
        <td id="WD_BoB_WB_BoS_TD"></td>
      </tr>
      <tr  style="background-color:#e5f1fb">
        <td>WB is BoB and WD is BoS</td>
        <td id="WB_BoB_WD_BoS_TD"></td>
      </tr>
      <tr>
        <td>Select Dog</td>
        <td id="SD_TD"></td>
      </tr>
      <tr style="background-color:#e5f1fb">
        <td>Select Bitch</td>
        <td id="SB_TD"></td>
      </tr>
    </tbody>
  </table>
</body>
</html>
